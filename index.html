<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>WUP Frame Visualizer</title>
  <link rel="stylesheet" href="styles.css">
  <link rel="stylesheet" href="diagnostics/diagnostics-styles.css">
</head>
<body>
  <div class="app">
    <canvas id="threeCanvas" aria-label="WebGL wall frame visualization"></canvas>
    <div id="threeTooltip" class="tooltip" role="status" aria-live="polite"></div>
    <div id="viewToast" class="view-toast" role="status" aria-live="polite" aria-atomic="true"></div>
    <button id="toggleMenu" class="menu-toggle" type="button" aria-label="Toggle menu visibility" title="Hide menu">−</button>
    <div class="ui-overlay" role="region" aria-label="Controls and legend">
      <div class="controls">
        <label for="wupFile">Load WUP file:</label>
        <input type="file" id="wupFile" accept=".wup">
        <label for="wupDirectory">Or load WUP directory:</label>
        <input type="file" id="wupDirectory" webkitdirectory directory multiple>
        <section class="loaded-wups" aria-label="Loaded WUP files">
          <h2>Loaded WUPs</h2>
          <ul id="loadedWupList" class="loaded-wup-list">
            <li class="loaded-wup-empty">No WUPs loaded.</li>
          </ul>
        </section>
        <button id="toggleProjection" type="button">Switch to perspective view</button>
        <fieldset class="layer-toggles" id="layerControls">
          <legend>Layers</legend>
          <label>
            <input type="checkbox" data-layer="structure" checked>
            Structure &amp; BOY
          </label>
          <label>
            <input type="checkbox" data-layer="pli" checked>
            PLI sheathing, NR, PAF
          </label>
          <label>
            <input type="checkbox" data-layer="pla" checked>
            PLA sheathing, NR, PAF
          </label>
        </fieldset>
        <span id="status" role="status"></span>
      </div>
      <div class="legend">
        <h2>Legend</h2>
        <ul>
          <li><span class="swatch stud"></span> Studs (QS)</li>
          <li><span class="swatch plate"></span> Plates (OG/UG)</li>
          <li><span class="swatch blocking"></span> Blocking (LS)</li>
          <li><span class="swatch sheathing"></span> Sheathing panels (PLI1/PP)</li>
          <li><span class="swatch nail-row"></span> Nail rows (NR)</li>
        </ul>
        <p class="legend-hint">Pan with left drag, orbit with right drag, scroll to zoom, press “1” for PLI, “2” for PLA, “3” toggles projection. Use the layer checkboxes to isolate structure, PLI, or PLA content.</p>
      </div>
    </div>
  </div>
  <script type="module" src="script.js"></script>
  <script type="importmap">
    {
      "imports": {
        "three": "https://cdn.jsdelivr.net/npm/three@0.161.0/build/three.module.js",
        "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.161.0/examples/jsm/"
      }
    }
  </script>
  <script type="module" src="three-frame.js"></script>
  <script type="module" src="diagnostics/diagnostics-ui.js"></script>
</body>
</html>
